2001-08-07  Rob Siemborski <rjs3+@andrew.cmu.edu>
	* lib/client.c (sasl_server_step): corrected maxoutbuf handleing
	* lib/server.c (sasl_server_step): corrected maxoutbuf handleing
	* lib/saslint.h (DEFAULT_MAXOUTBUF): removed

	* lib/common.c (sasl_encodev, sasl_decode): maxbufsize checking

	* utils/testsuite.c (testseclayer,doauth): more security layer
	  checking.  Added parameter to doauth to disable fatal() calls,
	  updated all callers.

	* utils/smtptest.c (main): added ability to support LMTP

	* plugins/gssapi.c: conform with draft-ietf-cat-sasl-gssapi-05.txt

2001-08-06  Rob Siemborski <rjs3+@andrew.cmu.edu>
	* utils/dbconverter-2.c (listusers_cb): handle PLAIN-APOP

	* lib/client.c (sasl_client_add_plugin, client_done):
	  save plugin name
	* lib/server.c (sasl_server_add_plugin, server_done):
	  save plugin name
	* lib/dlopen.c (_sasl_plugin_load): correctly pass pluginname
	* lib/common.c (sasl_getprop): implement SASL_AUTHSOURCE properly
	* lib/saslint.h (cmechanism_t, mechanism_t): added plugname field
	* lib/canonusr.c (internal_canonuser_init): no longer limit
	  based on plugname
	* plugins/sasldb.c (sasldb_auxprop_plug_init): no longer limit
	  based on plugname

2001-08-01  Rob Siemborski <rjs3+@andrew.cmu.edu>
	* utils/smtptest.c (iptostring): better behaved w.r.t endianness

	* plugins/cram.c (crammd5_server_mech_step): support for old-style
	  secrets
	* plugins/digestmd5.c (digestmd5_server_mech_step): support for
	  old-style secrets
	* lib/checkpw.c (auxprop_verify_password,_sasl_make_plain_secret):
	  support for old-style secrets
	* utils/dbconverter-2.c: added
	* utils/sasldblistusers.c (listusers): Print out property names
	  as well as username@realm format.
	* utils/saslpasswd.c (_sasl_sasldb_set_pass): Correctly handle updates
	  that concern old-style secrets

	* sasldb/allockey.c: Added a missing null to propName in key parser
	
2001-07-31  Rob Siemborski <rjs3+@andrew.cmu.edu>
	* plugins/kerberos4.c (mech_avail): made static

	* plugins/kerberos4.c (mech_avail): fixed ipv4 check
	  (patch from Hajimu UMEMOTO <ume@mahoroba.org>)

	* doc/appconvert.html: vague guide documenting our experience
	  porting Cyrus IMAPd to use SASLv2
	* doc/Makefile.am: added appconvert.html

	* lib/client.c (sasl_client_new): fixed ip address setting to hit
		relevant params structures as well
	* lib/server.c (sasl_server_new): fixed ip address setting to hit
		relevant params structures as well
	* lib/common.c (sasl_setprop): fixed ip address setting to hit
		relevant params structures as well

	* lib/common.c (sasl_seterror): fixed spelling error

2001-07-30  Rob Siemborski <rjs3+@andrew.cmu.edu>
	* sasldb/db_berkeley.c: utils->seterror() calls
	* sasldb/db_gdbm.c: utils->seterror() calls
	* sasldb/db_ndbm.c: utils->seterror() calls
	* sasldb/allockey.c: utils->seterror() calls

	* lib/common.c (sasl_seterror): still call logging callback with a
	  null sasl_conn_t

	* plugins/sasldb.c (sasldb_auxprop_lookup): support for multiple
	  properties

	* plugins/Makefile.am: added -module to LDFLAGS

	* config/sasldb.m4: Allow specification of exact berkeley db
	  lib and include paths
	* sasldb/Makefile.am: Add proper include directory

	* sasldb/sasldb.m4 (SASL_DB_BACKEND_STATIC): include allockey.o
	
	* Ready for 2.0.3-BETA	

	* plugins/kerberos4.c (kerberos4_server_plug_init): reset
	  srvtab when we do not load correctly.

	* lib/staticopen.c (_sasl_load_plugins): do not fail
	  if a single plugin load fails

	* include/sasl.h (SASL_CLIENT_FALLBACK): removed

2001-07-27  Rob Siemborski <rjs3+@andrew.cmu.edu>
	* configure.in: extracted SASLDB-related checking
	* config/sasldb.m4: added

	* configure.in: now cache the JNI include directory path

	* utils/testsuite.c: switch some sasl_errstrings to sasl_errdetail
	* plugins/gssapi.c: Fix error reporting

	* plugins/gssapi.c: Required SASL_CB_USER instead of SASL_CB_AUTHNAME

	* plugins/anonymous.c: Function name standardization
	* plugins/cram.c: Function name standardization
	* plugins/digestmd5.c: Function name standardization
	* plugins/gssapi.c: Function name standardization
	* plugins/kerberos.c: Function name standardization
	* plugins/login.c: Function name standardization
	* plugins/plain.c: Function name standardization	

	* sasldb/allockey.c: Generalized SASLdb API
	* sasldb/db_berkeley.c: Generalized SASLdb API
	* sasldb/db_gdbm.c: Generalized SASLdb API
	* sasldb/db_ndbm.c: Generalized SASLdb API
	* sasldb/db_none.c: Generalized SASLdb API
	* sasldb/db_testw32.c: Added #error to block compile so the API will
		be fixed when we do the Win 32 port
	* plugins/sasldb.c: Use new SASLdb API
	* utils/saslpasswd.c: Use new SASLdb API
	
2001-07-26  Rob Siemborski <rjs3+@andrew.cmu.edu>
	* lib/common.c (_sasl_getcallback): fixed reference to
	  	possibly NULL conn

	* configure.in: only build saslpasswd and sasldblistusers
		if we have a meaningfull libsasldb (e.g. not db_none),
	* utils/Makefile.am: only build saslpasswd and sasldblistusers
		if we have a meaningfull libsasldb (e.g. not db_none),

	* configure.in: conditionally build smtptest
	* utils/Makefile.am: conditionally build smtptest
	
	* sasldb/allockey.c (_sasldb_parse_key): added

	* sasldb/sasldb.h: New key list access API, added  parameter to
		sasl_check_db (all callers updated, all callees updated)
	* sasldb/db_berkeley.c: Implement key list access API
	* sasldb/db_gdbm.c: Implement key list access API
	* sasldb/db_ndbm.c: Implement key list access API
	* sasldb/db_none.c: Implement key list access API

	* utils/sasldblistuser.c: Use libsasldb instead of internal
	  	functions.
	
	* utils/saslpasswd.c: No longer have separate global_utils,
		call sasl_dispose and sasl_done

	* acconfig.h: check for inttypes.h
	* configure.in: check for inttypes.h
	* plugins/plugin_common.c: include, if necessary, inttypes.h,
		reference uint32_t instead of u_int32_t

2001-07-25  Rob Siemborski <rjs3+@andrew.cmu.edu>
	* lib/saslint.h: changed "sasldb" verifier to "auxprop"
	* lib/server.c: changed "sasldb" verifier to "auxprop"
	* lib/checkpw.c: changed "sasldb" verifier to "auxprop"
	* utils/testsuite.c: changed "sasldb" verifier to "auxprop"
	* doc/options.html: changed "sasldb" verifier to "auxprop"

	* README: updated upgrade information

	* utils/Makefile.am (CLEANFILES): added

	* sasldb/allockey.c (alloc_key): single place for alloc_key()
	  Removed alloc_key from other source files.
	* sasldb/sasldb.h: added declaration of alloc_key()	

	* configure.in: added checks for db-3.3 and db3.3

	* plugins/digestmd5.c (get_realm): now error on empty user_realm

	* plugins/cram.c (client_required_prompts): removed redundant
	  required_prompts

	* plugins/plain.c (client_continue_step): server-send-last error

	* utils/testsuite.c (main): detailed client-send-first,
		server-send-last checking
	
2001-07-24  Rob Siemborski <rjs3+@andrew.cmu.edu>
	* plugins/sasldb.c: Cleaned up calls into the glue code

	* java/Test/*: Cleaned up java test utilities
	
	* configure.in: Minor GSSAPI configure changes

	* utils/saslpasswd.c: Clarfied -d option for saslpasswd
	* utils/saslpasswd.8: Clarfied -d option for saslpasswd
	
	* doc/plugprog.html: Added plugin programmer's guide
	* doc/index.html: linked to plugin programmer's guide
	
        * configure.in: corrected configure checking of Berkeley DB
          (from Scot W. Hetzel <scot@genroco.com>)

	* configure.in: corrected checking for libcom_err
	  (from Scot W. Hetzel <scot@genroco.com>)

2001-07-23  Rob Siemborski <rjs3+@andrew.cmu.edu>
	* configure.in: Added check for db3/db.h

	* plugins/kerberos4.c Added mech_avail (checks for IP info)
	
	* lib/common.c: Fixed setting of serverFQDN in _sasl_conn_init
	
	* lib/server.c: Fully Implemented mech_avail calls in glue code
	
	* lib/server.c: Fixed allocation/destruction of sasl_conn_t's
	* lib/client.c: Fixed allocation/destruction of sasl_conn_t's
	* lib/common.c: Rely on earlier initialization in server.c and client.c

	* doc/options.html: added

	* ChangeLog: back to standard format
	
2001-07-20  Rob Siemborski <rjs3+@andrew.cmu.edu>
	* Can now deal with variable client-first mechs such as
	  DIGEST-MD5, though this interface is subject to change
	* Modified parseuser to deal better with default realms
	* Simplified realm handling in DIGEST-MD5 (getrealm callback
	  is no longer required).
	* Cleaned up some memory management issues in DIGEST-MD5

2001-07-19  Rob Siemborski <rjs3+@andrew.cmu.edu>
	* Fixed prototype of sasl_getpath_t to be in conformance with
	  memory allocation rules
	* Fixed up samples directory
	* Try to dlopen using information in .la file if available
	  (based on patch from
	   Stoned Elipot <Stoned.Elipot@script.jussieu.fr>)
	* Resolution of most of the server-send-first and client-send-last
	  issues (using mechanism feature flags)

2001-07-18  Rob Siemborski <rjs3+@andrew.cmu.edu>
	* Updated config.guess and config.sub
	* Better underscore checking for dlsym
	* Resolved possible global_utils namespace collision
	* Updated sasldb library to be expandable to multiple properties
	  if the need arises in the future.
	* IPv6 support from Hajimu UMEMOTO <ume@mahoroba.org>

2001-07-17  Rob Siemborski <rjs3+@andrew.cmu.edu>
	* Extricated sasldb support to an auxprop plugin only.
	  sasldb modifications can now only be done through the saslpasswd
	  interface.

2001-07-13  Rob Siemborski <rjs3+@andrew.cmu.edu>
	* Fixed buffer overrun problem in sasldb auxprop plugin
	* Removed severe memory leak from testsuite
	* Version 2.0.2-ALPHA Released

2001-07-11  Rob Siemborski <rjs3+@andrew.cmu.edu>
	* error reporting in KERBEROS_V4 plugin
	* vague handling of SASL_AUTHSOURCE for getprop
	* random misc error reporting bugs
	* basic error messages for GSSAPI plugin

2001-07-10  Rob Siemborski <rjs3+@andrew.cmu.edu>
	* added client-send-first logic in glue code
	* removed some client-send-first logic in mechanisms
	* removed IPv4 specifics from sasl_conn_t
	* Much gluecode error revamping (store the error code
	  in sasl_conn_t)

2001-07-09  Rob Siemborski <rjs3+@andrew.cmu.edu>
	* Removed dependency on "name" in canonuser plugin structure
	* Update configure.in from a new configure.scan
	* Update copyright info in man pages, finished all API man pages
	* Added auxprop tests to testsuite
	* Added userdb callback support

2001-07-09  Rob Siemborski <rjs3+@andrew.cmu.edu>
	* First attempt at making the java code work again
	* Minor memory and byte order bugfixes
	* Added testing support for dmalloc (--with-dmalloc)

2001-07-06  Rob Siemborski <rjs3+@andrew.cmu.edu>
	* Loading of auxprop and canonuser plugins from DSOs
	  (This still sucks performance wise, and will be fixed soon)
	* Fixed some lack of indirection in the plugins
	* Reverted to the v1 entry points for the plugins
	* Cleaned up a good deal of the library loading code so it
	  now only gets called from the sasl_*_init functions, and
	  all the cleanup happens in the common sasl_done function
	* Added SASL_IPREMOTEPORT and SASL_IPLOCALPORT to setprop,
	  and now _sasl_conn_init calls it to do the same work.

2001-07-05  Rob Siemborski <rjs3+@andrew.cmu.edu>
	* Working libsfsasl and smtptest program (--with-sfio)
	* Fixed sasldblistusers (atleast for Berkeley DB)
	* seterror() calls in ANONYMOUS, CRAM, PLAIN and LOGIN
	* Some new manpages

2001-07-03  Rob Siemborski <rjs3+@andrew.cmu.edu>
	* Static library compilation now optional (--with-staticsasl)
	  Note that this is different from --enable-static, which causes
	  libtool to build static versions of everything is is almost
	  certainly NOT what you want.
	* Removed all references to the ancient NANA code.
	* Updated some documentation.

2001-07-02  Rob Siemborski <rjs3+@andrew.cmu.edu>
	* Improved allocation efficiency of KERBEROS_V4, DIGEST-MD5,
	  and GSSAPI security layers.
	* Fixed a decode bug in DIGEST-MD5 (and testsuite improvements to
	  help find similar ones)
	* Fixed a number of solaris compiler warnings
	* Static Library Build Support

2001-06-30  Rob Siemborski <rjs3+@andrew.cmu.edu>
	* Cleanup of some man pages (added sasl_errors.3)

2001-06-29  Rob Siemborski <rjs3+@andrew.cmu.edu>
	* Cleanup of APOP Code + new man page (Ken Murchison <ken@oceana.com>)
	* Cleanup of comments in some files (Ken Murchison <ken@oceana.com>)
	* Fixed some compiler errors on Solaris using /opt/SUNWspro/bin/cc
	  (Reported by Mei-Hui Su <mei@ISI.EDU>

2001-06-28  Rob Siemborski <rjs3+@andrew.cmu.edu>
	* Improved memory allocation in default sasl_decode handler
	* Added ability to disable sasl_checkapop (--disable-checkapop)
	* Re-initialized kerberos mutex to NULL after it was freed

2001-06-28  Rob Siemborski <rjs3+@andrew.cmu.edu>
	* Fixed a severe bug in DIGEST-MD5 Plugin
	* KERBEROS_V4 plugin now thread safe
	* Version 2.0.1-ALPHA Released (due to DIGEST-MD5 problem)

2001-06-27  Rob Siemborski <rjs3+@andrew.cmu.edu>
	* Version 2.0.0-ALPHA Released
